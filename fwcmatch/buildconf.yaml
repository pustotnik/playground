
buildroot: _build

tasks:
  fwcmatch-bench :
    features : cxxprogram
    source   : 'src/**/*.cpp'
    libs     : benchmark

configure:
  - do: check-libs

#CMN_CXXFLAGS: -Wall -Wextra -std=c++17 -fno-rtti -flto
CMN_CXXFLAGS: -Wall -Wextra -std=c++20 -fno-rtti -flto
CMN_LINK_FLAGS: -flto

SANIT_CMN_CXXFLAGS: $CMN_CXXFLAGS -fsanitize=address
SANIT_CMN_LINK_FLAGS: $CMN_LINK_FLAGS -fsanitize=address

buildtypes:
  default : release

  release:
    #toolchain : auto-c++
    #toolchain : clang++
    #cxxflags: $CMN_CXXFLAGS -O2
    cxxflags: $CMN_CXXFLAGS -O3
    linkflags: $CMN_LINK_FLAGS
    #defines: NDEBUG=1

  debug:
    cxxflags: $CMN_GCC_FLAGS -O0 -g
    linkflags: $CMN_LINK_FLAGS

  sanit-rls:
    cxxflags: $SANIT_CMN_CXXFLAGS -O3
    linkflags: $SANIT_CMN_CXXFLAGS

  sanit-dbg:
    cxxflags: $SANIT_CMN_CXXFLAGS -O0 -g
    linkflags: $SANIT_CMN_CXXFLAGS
